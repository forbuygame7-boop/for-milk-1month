<!DOCTYPE html>
<html lang="th">
<head>
    <script type="module" src="auth-guard.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Timeline ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Sarabun', sans-serif; background: #fff0f5; color: #555; margin: 0; padding: 20px; }
        .header { text-align: center; margin-bottom: 40px; }
        .header h1 { color: #ff4d4d; margin: 0; }
        
        /* ‡πÄ‡∏™‡πâ‡∏ô‡πÅ‡∏Å‡∏ô‡∏Å‡∏•‡∏≤‡∏á */
        .timeline { position: relative; max-width: 800px; margin: 0 auto; }
        .timeline::after { content: ''; position: absolute; width: 4px; background-color: #ffcccc; top: 0; bottom: 0; left: 50%; margin-left: -2px; border-radius: 2px; }
        
        /* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
        .container { padding: 10px 40px; position: relative; background-color: inherit; width: 50%; box-sizing: border-box; }
        .container.left { left: 0; }
        .container.right { left: 50%; }
        
        /* ‡∏à‡∏∏‡∏î‡∏Å‡∏•‡∏°‡πÜ ‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á */
        .container::after { content: '‚ù§Ô∏è'; position: absolute; width: 30px; height: 30px; right: -17px; background-color: white; border: 4px solid #ff9f43; top: 15px; border-radius: 50%; z-index: 1; text-align: center; line-height: 30px; font-size: 14px; }
        .container.right::after { left: -17px; }
        
        /* ‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ */
        .content { padding: 20px; background-color: white; position: relative; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .content h2 { margin: 0 0 10px 0; font-size: 1.2rem; color: #ff4d4d; }
        .content small { color: #999; display: block; margin-bottom: 10px; }
        .content img { width: 100%; border-radius: 10px; margin-top: 10px; }
        
        /* ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏•‡∏±‡∏ö */
        .back-btn { position: fixed; bottom: 20px; right: 20px; background: #ff4d4d; color: white; padding: 10px 20px; border-radius: 30px; text-decoration: none; box-shadow: 0 4px 10px rgba(0,0,0,0.2); z-index: 99; }

        /* ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ (‡∏à‡∏≠‡πÄ‡∏•‡πá‡∏Å) */
        @media screen and (max-width: 600px) {
            .timeline::after { left: 31px; }
            .container { width: 100%; padding-left: 70px; padding-right: 25px; }
            .container.right { left: 0; }
            .container.left::after, .container.right::after { left: 15px; }
        }
    </style>
</head>
<body>
    <body>
    <div id="auth-overlay" style="position:fixed; top:0; left:0; width:100%; height:100%; background:white; z-index:9999; display:flex; justify-content:center; align-items:center; flex-direction:column;">
        <h2 style="color:#ff4d4d;">üîí ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏∏‡∏ç‡πÅ‡∏à...</h2>
        <p>‡∏£‡∏≠‡πÅ‡∏õ‡πä‡∏ö‡∏ô‡∏∂‡∏á‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö</p>
    </div>


    <div class="header">
        <h1>‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏£‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ üíï</h1>
        <p>‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢...</p>
    </div>

    <div class="timeline" id="timeline-box">
        <p style="text-align:center;">Loading...</p>
    </div>

    <a href="index.html" class="back-btn">‚¨ÖÔ∏è ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>

    <script type="module">
        // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Firebase (‡πÉ‡∏ä‡πâ‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏∑‡πà‡∏ô)
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";
        
        // ** ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà Config ‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö **
        const firebaseConfig = {
            apiKey: "AIzaSyC9pqct58Qc61jRF-h0c2nt1ntctxF-CJc",
            authDomain: "love-chat-1month.firebaseapp.com",
            databaseURL: "https://love-chat-1month-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "love-chat-1month",
            storageBucket: "love-chat-1month.firebasestorage.app",
            messagingSenderId: "434980133810",
            appId: "1:434980133810:web:12929b8f2843dd07c162ab"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        onValue(ref(db, 'site_config/timeline'), (snapshot) => {
            const data = snapshot.val() || [];
            renderTimeline(data);
        });

        function renderTimeline(list) {
            const box = document.getElementById('timeline-box');
            box.innerHTML = '';
            
            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà (‡πÄ‡∏Å‡πà‡∏≤ -> ‡πÉ‡∏´‡∏°‡πà)
            list.sort((a, b) => new Date(a.date) - new Date(b.date));

            list.forEach((item, index) => {
                const side = index % 2 === 0 ? 'left' : 'right'; // ‡∏™‡∏•‡∏±‡∏ö‡∏ã‡πâ‡∏≤‡∏¢‡∏Ç‡∏ß‡∏≤
                const imgHTML = item.image ? `<img src="${item.image}">` : '';
                
                const html = `
                <div class="container ${side}">
                    <div class="content">
                        <h2>${item.title}</h2>
                        <small>üìÖ ${item.date}</small>
                        <p>${item.desc || ''}</p>
                        ${imgHTML}
                    </div>
                </div>`;
                box.innerHTML += html;
            });

            if(list.length === 0) box.innerHTML = '<p style="text-align:center;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô Admin ‡∏Ñ‡∏£‡∏±‡∏ö</p>';
        }
    </script>
</body>
</html>
